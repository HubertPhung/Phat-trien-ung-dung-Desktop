using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace BaiTapC
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void btnThoat_Click(object sender, EventArgs e)
        {
            Close();
        }

        private void btnThemMoi_Click(object sender, EventArgs e)
        {
            // Clear inputs for new entry
            txtMSSV.Clear();
            txtHoLot.Clear();
            txtTen.Clear();
            dtpNgaySinh.Value = DateTime.Today;
            txtLop.Clear();
            txtCMND.Clear();
            mtxtSoDT.Clear();
            txtDiaChi.Clear();
            rdoNam.Checked = true;
            foreach (var chk in grpMonHoc.Controls.OfType<CheckBox>()) chk.Checked = false;
            txtMSSV.Focus();
        }

        private void btnCapNhat_Click(object sender, EventArgs e)
        {
            // Add to grid as a simple demo
            dgvSinhVien.Rows.Add(
                txtMSSV.Text,
                txtHoLot.Text,
                txtTen.Text,
                dtpNgaySinh.Value.ToShortDateString(),
                txtLop.Text,
                txtCMND.Text,
                mtxtSoDT.Text,
                txtDiaChi.Text
            );
        }

        private void btnTimKiem_Click(object sender, EventArgs e)
        {
            // Very simple search by MSSV in the grid
            string key = txtMSSV.Text.Trim();
            foreach (DataGridViewRow row in dgvSinhVien.Rows)
            {
                if (row.IsNewRow) continue;
                row.Selected = string.Equals(Convert.ToString(row.Cells[0].Value), key, StringComparison.OrdinalIgnoreCase);
                if (row.Selected)
                {
                    dgvSinhVien.FirstDisplayedScrollingRowIndex = row.Index;
                    break;
                }
            }
        }
    }
}
